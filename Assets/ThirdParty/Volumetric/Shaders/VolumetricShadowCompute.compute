#pragma enable_d3d11_debug_symbols

#pragma kernel WriteShadowVolumeDir

#include "VolumetricHelper.hlsl"

// Kernels
[numthreads(8, 8, 16)]
void WriteShadowVolumeDir(uint3 pos : SV_DispatchThreadID)
{
    float3 jitterFroxelPos = JitterFroxelPos(pos);
    float3 worldPos = FroxelPos2WorldPos(jitterFroxelPos);
    
    float visibility = SampleShadow(float4(worldPos, 1));
    _ShadowVolume[pos] = visibility;
}