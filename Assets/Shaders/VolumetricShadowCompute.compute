#pragma enable_d3d11_debug_symbols

#pragma kernel WriteShadowVolumeDir

#include "VolumetricHelper.hlsl"

// Kernels
[numthreads(8, 8, 16)]
void WriteShadowVolumeDir(uint3 pos : SV_DispatchThreadID)
{
    float3 froxelPos = pos;
    froxelPos.z -= _TemporalOffset;

    float4 worldPos = float4(FroxelPos2WorldPos(froxelPos), 1);
    float visibility = SampleShadow(worldPos);
    _ShadowVolume[pos] = visibility;
}